{% from "govuk/components/cookie-banner/macro.njk" import govukCookieBanner %}

{% set lng = params.language %}
{% set serviceName = params.serviceName %}

{% set html %}
<p class="govuk-body">{{ 'cookieBanner.body1' | translate(lng) }}</p>
<p class="govuk-body">{{ 'cookieBanner.body2' | translate(lng) }}</p>
{% endset %}

{% set acceptHtml %}
  <p class="govuk-body">
    {{ 'cookieBanner.cookieBannerAccept.body1' | translate(lng) }}
    <a class="govuk-link" href="https://signin.account.gov.uk/cookies">
      {{ 'cookieBanner.changeCookiePreferencesLink' | translate(lng) }}
    </a> 
    {{ 'cookieBanner.cookieBannerAccept.body2' | translate(lng) }}
  </p>
{% endset %}

{% set rejectedHtml %}
  <p class="govuk-body">
    {{ 'cookieBanner.cookieBannerReject.body1' | translate(lng) }}
    <a class="govuk-link" href="https://signin.account.gov.uk/cookies">
      {{ 'cookieBanner.changeCookiePreferencesLink' | translate(lng) }}
    </a> 
    {{ 'cookieBanner.cookieBannerReject.body2' | translate(lng) }}
  </p>
{% endset %}

{{ govukCookieBanner({
  ariaLabel: 'cookieBanner.ariaLabel' | translate(lng),
  name: "gov-uk-cookie-banner",
  messages: [
    {
      headingText: ('cookieBanner.headingText' | translate(lng)) ~ ' ' ~ params.serviceName[lng],
      html: html,
      attributes: {
        "id": "cookies-banner-main"
      },
      actions: [
        {
          text: 'cookieBanner.acceptAdditionalCookies' | translate(lng),
          type: "button",
          name: "cookiesAccept",
          value: "accept"
        },
        {
          text: 'cookieBanner.rejectAdditionalCookies' | translate(lng),
          type: "button",
          name: "cookiesReject",
          value: "reject"
        },
        {
          text: 'cookieBanner.viewCookies' | translate(lng),
          href: "https://signin.account.gov.uk/cookies"
        }
      ]
    },
    {
      html: acceptHtml,
      attributes: {
        "id": "cookies-accepted"
      },
      actions: [
        {
          text: 'cookieBanner.changeCookiePreferencesLink' | translate(lng),
          href: "#",
          type: "button",
          classes:"cookie-hide-button",
          attributes: {
            "aria-label": 'cookieBanner.changeCookiePreferencesLink' | translate(lng)
          }
        }
      ],
      hidden: true
    },
    {
      html: rejectedHtml,
      attributes: {
        "id": "cookies-rejected"
      },
      actions: [
        {
          text: 'cookieBanner.hideCookieMessage' | translate(lng),
          href: "#",
          type: "button",
          classes:"cookie-hide-button",
          attributes: {
            "aria-label": 'cookieBanner.hideCookieMessage' | translate(lng)
          }
        }
      ],
      hidden: true
    }
  ],  hidden: false
}) }}